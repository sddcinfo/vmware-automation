#cloud-config
autoinstall:
  version: 1
  identity:
    hostname: ubuntu-vm
    # default password is 'password' 
    password: "$6$rounds=656000$X0UBIHnCCUvTIJ0c$2Fh75NRz8POPCxwXadHSyd6vH3VKYUpq6yycaLt4Xc5koN1DCqd5cdsKb3yraBPqH0uyrMYq89cH5KhaQOuKj."
    username: "sysadmin"
  user-data:
    users:
      - name: sysadmin
        sudo: ALL=(ALL) NOPASSWD:ALL
        shell: /bin/bash
  ssh:
    install-server: true
    allow-pw: true
  network:
    version: 2
    ethernets:
      ens33:
        dhcp4: false
        addresses: [10.10.1.1/24]
      ens34:
        dhcp4: true
  # This storage layout is for legacy BIOS systems.
  storage:
    layout:
      name: direct
      match:
        size: largest
    config:
      - type: disk
        id: disk-nvme0n1
        ptable: msdos # Use msdos for BIOS
        wipe: true
        path: /dev/nvme0n1
        grub_device: true
      - type: partition
        id: partition-1
        device: disk-nvme0n1
        size: -1 # Use the entire disk
        number: 1
        flag: boot # Mark as bootable for BIOS
      - type: format
        id: format-1
        volume: partition-1
        fstype: ext4
      - type: mount
        id: mount-1
        device: format-1
        path: /
  packages:
    - git
    - gh
    - ansible